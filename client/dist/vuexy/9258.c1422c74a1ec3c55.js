"use strict";(self.webpackChunkvuexy=self.webpackChunkvuexy||[]).push([[9258],{9010:function(M,Z,o){o.d(Z,{q:function(){return j}});var C=o(5134),A=o(7289),_=o(4522),T=o(8260),x=o(540),d=o(2047),e=o(6154),j=function(){var p=function(){function v(c){(0,C.Z)(this,v),this._http=c,this.wareData={data:""},this.host=T.N.apiUrl+"/api/warehouses/",this.header=new _.WM({Accept:"application/json"}),this.params=new _.LE}return(0,A.Z)(v,[{key:"AddWare",value:function(m){return this._http.post("".concat(this.host),m,{headers:this.header}).pipe((0,d.K)(function(f){return console.log(f),(0,x._)(f)}))}},{key:"allware",value:function(){return this._http.get("".concat(this.host),{headers:this.header,params:this.params})}},{key:"deleteWare",value:function(m){return this._http.delete("".concat(this.host).concat(m))}},{key:"updateWare",value:function(m,f){return this._http.patch("".concat(this.host).concat(m),f)}},{key:"getWareid",value:function(m){return this._http.get("".concat(this.host).concat(m))}}]),v}();return p.\u0275fac=function(c){return new(c||p)(e.LFG(_.eN))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p}()},9258:function(M,Z,o){o.r(Z),o.d(Z,{CreateadjustmentModule:function(){return S}});var C=o(7289),A=o(5134),_=o(3907),T=o(9753),x=o(1705),d=o(9133),e=o(6154),j=o(8452),p=o(9010),v=o(3003),c=o(1948),m=o(6019),f=o(9850),q=o(6533);function y(r,s){if(1&r&&(e.TgZ(0,"option",31),e._uU(1),e.qZA()),2&r){var n=s.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function b(r,s){1&r&&(e.TgZ(0,"small"),e._uU(1,"This field is required"),e.qZA())}function w(r,s){if(1&r&&(e.TgZ(0,"div",32),e.YNc(1,b,2,0,"small",9),e.qZA()),2&r){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.createAdjForm.controls.warehouse_id.errors?null:n.createAdjForm.controls.warehouse_id.errors.required)}}function O(r,s){if(1&r&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&r){var n=e.oxw();e.xp6(1),e.Oqu(null==n.errors?null:n.errors.warehouse_id)}}function D(r,s){1&r&&(e.TgZ(0,"small"),e._uU(1,"This field is required"),e.qZA())}function U(r,s){if(1&r&&(e.TgZ(0,"div",33),e.YNc(1,D,2,0,"small",9),e.qZA()),2&r){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",null==n.createAdjForm.controls.date.errors?null:n.createAdjForm.controls.date.errors.required)}}function F(r,s){if(1&r&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&r){var n=e.oxw();e.xp6(1),e.Oqu(null==n.errors?null:n.errors.date)}}function P(r,s){if(1&r){var n=e.EpF();e.TgZ(0,"li",34),e.NdJ("click",function(){var i=e.CHM(n).index;return e.oxw().addAdjDetail(i)}),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.qZA()}if(2&r){var t=s.$implicit;e.xp6(2),e.hij(" ",t.name,"")}}function I(r,s){if(1&r){var n=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"div",35),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"core-touchspin",36),e.NdJ("onChange",function(i){var h=e.CHM(n).index;return e.oxw().countChange(i,h)}),e.qZA(),e.qZA(),e.TgZ(12,"td",37),e.TgZ(13,"div",38),e.TgZ(14,"select",39,40),e.NdJ("change",function(){var u=e.CHM(n).index,h=e.MAs(15);return e.oxw().changeDetailType(u,h.value)}),e.TgZ(16,"option",41),e._uU(17,"Subtraction"),e.qZA(),e.TgZ(18,"option",42),e._uU(19,"Addition"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",29),e.TgZ(21,"button",43),e.NdJ("click",function(){var u=e.CHM(n).index;return e.oxw().removeAdjDetail(u)}),e._UZ(22,"i",44),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){var t=s.$implicit,l=s.index;e.xp6(2),e.Oqu(l+1),e.xp6(2),e.Oqu(t.product.name),e.xp6(2),e.Oqu(t.product.code),e.xp6(3),e.hij("",t.product.in_stock," pc"),e.xp6(2),e.Q6J("minValue",1)("numberValue",t.quantity),e.xp6(11),e.Q6J("size",24)}}var N=function(){var r=function(){function s(n,t,l,a,i){(0,A.Z)(this,s),this._router=n,this._toastr=t,this._warehouseService=l,this._adjustmentService=a,this._productSearchService=i,this.pageBasicText=3,this.submitted=!1,this.errors={},this.searchInput="",this.wannaPass=!1,this.createAdjForm=new d.cw({warehouse_id:new d.NI("",d.kI.required),date:new d.NI("",d.kI.required),notes:new d.NI(null),search:new d.NI(null)})}return(0,C.Z)(s,[{key:"ngOnInit",value:function(){var t=this;this._warehouseService.allware().subscribe({next:function(a){return t.warehouses=a.data}})}},{key:"storeAdjustment",value:function(){var t=this;if(this.submitted=!0,0!=this.adjDetails.length){if(this.createAdjForm.valid&&this.wannaPass){var l=JSON.parse(localStorage.getItem("currentUser")),a=this.createAdjForm.value,i={next:function(g){t._toastr.success(g.message),t.resetForm()},error:function(g){t._toastr.error("Something went wrong!"),console.log(g)}},u={date:a.date,warehouse_id:a.warehouse_id,notes:a.notes,user_id:l.id,details:this.adjDetails,items:Number(this.adjDetails.length)};this._adjustmentService.store(u).subscribe(i)}}else this._toastr.error("please choase product!","Error")}},{key:"getWarehouse",value:function(t){this.products=[],this.adjDetails=[]}},{key:"adjSearch",value:function(t){var l=this;this.warehouse_id?this._productSearchService.adjSearch(t,this.warehouse_id).subscribe({next:function(i){l.products=i.data}}):this._toastr.error("please choose warehouse")}},{key:"addAdjDetail",value:function(t){var l=this;if(this.checkProductExist(this.adjDetails,this.products[t])){var i=this.adjDetails.findIndex(function(h){return h.product.id===l.products[t].id});this.adjDetails[i].quantity++}else this.adjDetails.push({product_id:this.products[t].id,quantity:1,product:this.products[t],type:"Subtraction"})}},{key:"checkProductExist",value:function(t,l){return t.find(function(a){return a.product.id===l.id})}},{key:"removeAdjDetail",value:function(t){this.adjDetails.splice(t,1)}},{key:"changeDetailType",value:function(t,l){this.adjDetails[t].type=l}},{key:"passMe",value:function(){this.wannaPass=!0}},{key:"resetForm",value:function(){this.createAdjForm.reset(),this.wannaPass=!1}},{key:"countChange",value:function(t,l){this.adjDetails[l].quantity=t}}]),s}();return r.\u0275fac=function(n){return new(n||r)(e.Y36(_.F0),e.Y36(j._W),e.Y36(p.q),e.Y36(v.S),e.Y36(c.j))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-createadjustment"]],decls:60,vars:11,consts:[[1,"container","col-md-12",3,"formGroup","ngSubmit"],[1,"col-md-12","row"],[1,"col-md-6"],["for","category",1,"col-md-4","control-label"],[1,"col-md-12"],["formControlName","warehouse_id","aria-label","Default select example",1,"form-select","col-md-12",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","warehouse_id","class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"],[4,"ngIf"],[1,"form-group","col-md-6"],["for","category",1,"col-md-6","control-label"],["type","date","placeholder","Date","aria-label","Date","formControlName","date",1,"form-control","form-control","col-md-12"],["id","date","class","form-text text-danger",4,"ngIf"],["for","items",1,"col-md-4","control-label"],[1,"switch-icon-left","col-md-1"],["data-feather","search",3,"size"],["type","text","placeholder","Search Here","formControlName","search",1,"form-control","col-md-11","text-left",3,"ngModel","ngModelChange","keyup"],["searchbar",""],[1,"col-md-12","list-group"],["class","list-group-item","style","list-style: none; cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"container","text-left"],[1,"table","col-md-12"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"form-group","col-md-12"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3","formControlName","notes",1,"form-control"],[1,"col-md-4"],["id","singlebutton","name","singlebutton",1,"btn","btn-primary",3,"click"],[3,"value"],["id","warehouse_id",1,"form-text","text-danger"],["id","date",1,"form-text","text-danger"],[1,"list-group-item",2,"list-style","none","cursor","pointer",3,"click"],[1,"badge","badge-pill","badge-light-warning"],[3,"minValue","numberValue","onChange"],[1,"row"],[1,"col-md-8"],["aria-label","Default select example",1,"form-select","col-md-12",3,"change"],["detailType",""],["value","Subtraction","selected",""],["value","Addition"],[1,"btn","btn-sm","btn-danger",3,"click"],["data-feather","x-circle",3,"size"]],template:function(n,t){if(1&n){var l=e.EpF();e.TgZ(0,"body"),e.TgZ(1,"h2"),e._uU(2,"Create Adjustment"),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"form",0),e.NdJ("ngSubmit",function(){return t.storeAdjustment()}),e.TgZ(5,"div",1),e.TgZ(6,"div",2),e.TgZ(7,"label",3),e._uU(8,"Warehouse"),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"select",5),e.NdJ("ngModelChange",function(i){return t.warehouse_id=i})("ngModelChange",function(i){return t.getWarehouse(i)}),e.YNc(11,y,2,2,"option",6),e.qZA(),e.YNc(12,w,2,1,"div",7),e.TgZ(13,"div",8),e.YNc(14,O,2,1,"small",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e.TgZ(16,"label",11),e._uU(17,"Date"),e.qZA(),e.TgZ(18,"div",4),e._UZ(19,"input",12),e.YNc(20,U,2,1,"div",13),e.TgZ(21,"div",8),e.YNc(22,F,2,1,"small",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"label",14),e._uU(25,"Product"),e.qZA(),e.TgZ(26,"div",1),e.TgZ(27,"span",15),e._UZ(28,"i",16),e.qZA(),e.TgZ(29,"input",17,18),e.NdJ("ngModelChange",function(i){return t.searchInput=i})("keyup",function(){e.CHM(l);var i=e.MAs(30);return t.adjSearch(i.value)}),e.qZA(),e.TgZ(31,"div",19),e.TgZ(32,"ul",4),e.YNc(33,P,3,1,"li",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",21),e.TgZ(35,"table",22),e.TgZ(36,"thead"),e.TgZ(37,"tr"),e.TgZ(38,"th",23),e._uU(39,"#"),e.qZA(),e.TgZ(40,"th",23),e._uU(41,"Product"),e.qZA(),e.TgZ(42,"th",23),e._uU(43,"Code Product"),e.qZA(),e.TgZ(44,"th",23),e._uU(45,"Stock"),e.qZA(),e.TgZ(46,"th",23),e._uU(47,"Qty"),e.qZA(),e.TgZ(48,"th",23),e._uU(49,"Type"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(50,"tbody",24),e.YNc(51,I,23,7,"tr",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",26),e.TgZ(53,"label",27),e._uU(54,"Note"),e.qZA(),e._UZ(55,"textarea",28),e.qZA(),e.TgZ(56,"div",26),e.TgZ(57,"div",29),e.TgZ(58,"button",30),e.NdJ("click",function(){return t.passMe()}),e._uU(59,"Submit"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&n&&(e.xp6(4),e.Q6J("formGroup",t.createAdjForm),e.xp6(6),e.Q6J("ngModel",t.warehouse_id),e.xp6(1),e.Q6J("ngForOf",t.warehouses),e.xp6(1),e.Q6J("ngIf",t.createAdjForm.controls.warehouse_id.touched&&t.createAdjForm.controls.warehouse_id.invalid||t.submitted&&t.createAdjForm.controls.warehouse_id.invalid),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.warehouse_id),e.xp6(6),e.Q6J("ngIf",t.createAdjForm.controls.date.touched&&t.createAdjForm.controls.date.invalid||t.submitted&&t.createAdjForm.controls.date.invalid),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.date),e.xp6(6),e.Q6J("size",30),e.xp6(1),e.Q6J("ngModel",t.searchInput),e.xp6(4),e.Q6J("ngForOf",t.products),e.xp6(18),e.Q6J("ngForOf",t.adjDetails))},directives:[d._Y,d.JL,d.sg,d.EJ,d.JJ,d.u,m.sg,m.O5,d.Fj,f.R,d.YN,d.Kr,q.d],styles:["body[_ngcontent-%COMP%]{background:white;border-radius:20px;padding:20px}select[_ngcontent-%COMP%]{border-radius:5px;padding:7px;border:1px gainsboro solid;height:39px}.icon[_ngcontent-%COMP%]{padding-left:10px;padding-top:6px;text-align:left}table[_ngcontent-%COMP%]{margin-top:20px;text-align:left;border-radius:10px}#btn[_ngcontent-%COMP%]{height:10px;width:10px}.quantity[_ngcontent-%COMP%]{width:60px}button[_ngcontent-%COMP%]{background-color:#8a2be2}ul[_ngcontent-%COMP%]{list-style:none;margin:0 -82px 0 auto;text-align:left}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:bold;padding-top:7px}.list-group[_ngcontent-%COMP%]{max-height:100px;margin-bottom:10px;overflow:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch}"]}),r}(),E=o(4677),J=[{path:"",component:N,data:{animation:"sample"}}],S=function(){var r=(0,C.Z)(function s(){(0,A.Z)(this,s)});return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[_.Bz.forChild(J),T.aw,x.$,E.D]]}),r}()}}]);